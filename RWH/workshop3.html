<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Environmental Management Plan Feedback</title>

<style>
  :root{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:#111827;
    --pink-1:#ff3d9a;
    --pink-2:#ff74c5;
    --pink-3:#ffd1ea;
    --pink-4:#ff55ad;

    --glass-bg: rgba(255,255,255,.16);
    --glass-bg-strong: rgba(255,255,255,.22);
    --glass-border: rgba(255,255,255,.32);
    --glass-shadow: 0 14px 40px rgba(0,0,0,.18);
    --text: rgba(17,24,39,.92);
    --muted: rgba(17,24,39,.62);
  }

  /* ===== Animated PINK gradient background ===== */
  html, body { height:100%; }
  body{
    margin:0;
    min-height:100svh;
    background: linear-gradient(-45deg, var(--pink-1), var(--pink-2), var(--pink-3), var(--pink-4));
    background-size: 400% 400%;
    animation: gradientShift 14s ease-in-out infinite;
    -webkit-text-size-adjust: 100%;
    color: var(--text);
  }
  @keyframes gradientShift{
    0%{ background-position: 0% 50%; }
    50%{ background-position: 100% 50%; }
    100%{ background-position: 0% 50%; }
  }
  @media (prefers-reduced-motion: reduce){
    body{ animation:none; background-position: 50% 50%; }
  }

  /* Soft glow overlay */
  .glow{
    position: fixed;
    inset: -20%;
    background:
      radial-gradient(closest-side at 20% 30%, rgba(255,255,255,.30), transparent 55%),
      radial-gradient(closest-side at 80% 20%, rgba(255,255,255,.22), transparent 55%),
      radial-gradient(closest-side at 70% 80%, rgba(255,255,255,.18), transparent 55%);
    filter: blur(12px);
    z-index: 0;
    pointer-events:none;
  }

  /* ===== Layout (single page scroll) ===== */
  .wrap{
    position: relative;
    z-index: 1;
    max-width: 760px;
    margin: 0 auto;
    padding: 18px;
    padding-bottom: calc(160px + env(safe-area-inset-bottom)); /* sticky + footer room */
  }

  /* ===== Glass card ===== */
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.12));
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(16px) saturate(1.25);
    -webkit-backdrop-filter: blur(16px) saturate(1.25);
    border-radius: 22px;
    padding: 18px;
    box-shadow: var(--glass-shadow);
  }

  /* Inner ‚Äúsurface‚Äù sections */
  .surface{
    background: rgba(255,255,255,.20);
    border: 1px solid rgba(255,255,255,.26);
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 10px 24px rgba(0,0,0,.10);
  }

  /* Brand header */
  .brand{
    display:flex;
    flex-direction: column;
    align-items:center;
    text-align:center;
    gap: 10px;
    margin-bottom: 14px;
  }
  .brand img{
    width:auto;
    height:auto;
    max-width:170px;
    max-height:120px;
    object-fit:contain;
    display:block;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.18));
  }
  .brand-title{
    font-size: 18px;
    font-weight: 850;
    margin: 0;
    line-height: 1.15;
    letter-spacing: -0.01em;
    color: rgba(17,24,39,.92);
    text-shadow: 0 1px 0 rgba(255,255,255,.22);
  }
  .brand-sub{
    font-size: 13px;
    color: var(--muted);
    margin: 0;
    line-height: 1.25;
  }

  h1{
    font-size: 20px;
    margin: 0 0 10px;
    letter-spacing: -0.01em;
  }

  .muted{
    color: var(--muted);
    font-size: 14px;
    line-height: 1.35;
    margin: 0;
  }

  /* Question spacing */
  .question-block{
    margin: 22px 0 30px;
  }
  .question-block + .question-block{
    margin-top: 38px;
  }

  .divider{
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.32), transparent);
    margin: 18px 0 8px;
  }

  label{
    display:block;
    font-weight: 750;
    margin-bottom: 10px;
    line-height: 1.25;
    color: rgba(17,24,39,.92);
  }

  /* Inputs (glass) */
  input[type="text"], textarea{
    width:100%;
    padding: 14px 14px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,.35);
    font-size: 16px; /* prevents iOS zoom */
    box-sizing: border-box;
    background: rgba(255,255,255,.20);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    color: rgba(17,24,39,.92);
  }
  textarea{ min-height: 110px; resize: vertical; }

  /* Pink focus */
  input[type="text"]:focus,
  textarea:focus{
    outline:none;
    border-color: rgba(255,61,154,.85);
    box-shadow:
      0 0 0 3px rgba(255,61,154,.22),
      0 12px 26px rgba(0,0,0,.12);
  }

  /* Pink tap highlight */
  input, textarea, button{
    -webkit-tap-highlight-color: rgba(255,61,154,.20);
  }

  .badge{
    background: rgba(255,255,255,.22);
    border: 1px solid rgba(255,255,255,.30);
    border-radius: 999px;
    padding: 8px 10px;
    font-size: 12px;
    color: rgba(17,24,39,.78);
    white-space: nowrap;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .error{
    color: rgba(185, 28, 28, .95);
    font-size: 14px;
    margin-top: 10px;
    display:none;
    font-weight: 650;
  }

  /* Slider panels (glass) */
  .panel{
    background: rgba(255,255,255,.18);
    border: 1px solid rgba(255,255,255,.26);
    border-radius: 18px;
    padding: 16px;
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    box-shadow: 0 10px 24px rgba(0,0,0,.10);
  }
  .panel-row{
    display:flex;
    align-items:center;
    gap: 14px;
  }

  .emoji{
    font-size: 46px;
    line-height: 1;
    transition: transform .18s ease;
    flex: 0 0 auto;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.14));
  }
  .emoji.bump{ transform: scale(1.08); }

  input[type="range"]{
    -webkit-appearance:none;
    appearance:none;
    width:100%;
    height: 10px;
    border-radius: 999px;
    background: rgba(255,255,255,.40);
    outline:none;
    touch-action: pan-y;
  }
  input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none;
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: rgba(17,24,39,.92);
    border: 3px solid rgba(255,255,255,.92);
    box-shadow: 0 14px 30px rgba(0,0,0,.22);
  }
  input[type="range"]::-moz-range-thumb{
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: rgba(17,24,39,.92);
    border: 3px solid rgba(255,255,255,.92);
    box-shadow: 0 14px 30px rgba(0,0,0,.22);
  }

  .scale-labels{
    display:flex;
    justify-content:space-between;
    font-size: 12px;
    color: rgba(17,24,39,.58);
    margin-top: 10px;
    padding: 0 2px;
  }

  .value-text{
    font-weight: 800;
    margin-top: 12px;
    font-size: 16px;
    line-height: 1.25;
    color: rgba(17,24,39,.92);
    text-shadow: 0 1px 0 rgba(255,255,255,.18);
  }

  /* Working group toggle (glass) */
  .toggle{
    width: 100%;
    max-width: 280px;
    height: 54px;
    background: rgba(255,255,255,.20);
    border: 1px solid rgba(255,255,255,.28);
    border-radius: 999px;
    padding: 6px;
    display:flex;
    gap: 6px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  .toggle button{
    flex:1;
    border:0;
    border-radius: 999px;
    background: transparent;
    color: rgba(17,24,39,.86);
    font-weight: 850;
    font-size: 16px;
    cursor:pointer;
    padding: 0;
    transition: transform .10s ease, background .15s ease;
  }
  .toggle button:active{ transform: scale(.99); }
  .toggle button.active{
    background: rgba(17,24,39,.92);
    color:#fff;
    box-shadow: 0 14px 26px rgba(0,0,0,.20);
  }

  .hint{
    font-size: 13px;
    color: rgba(17,24,39,.60);
    margin-top: 10px;
    line-height: 1.3;
  }

  /* Sticky bottom actions (glass bar) */
  .sticky{
    position: fixed;
    left:0; right:0; bottom:0;
    padding: 12px 14px calc(54px + env(safe-area-inset-bottom));
    background: rgba(255,255,255,.18);
    backdrop-filter: blur(18px) saturate(1.25);
    -webkit-backdrop-filter: blur(18px) saturate(1.25);
    border-top: 1px solid rgba(255,255,255,.26);
    z-index: 10;
  }
  .sticky-inner{
    max-width: 760px;
    margin: 0 auto;
    display:flex;
    gap: 10px;
  }

  .btn{
    border:0;
    border-radius: 16px;
    padding: 14px 16px;
    font-size: 16px;
    font-weight: 850;
    cursor:pointer;
    transition: transform .10s ease, filter .15s ease;
  }
  .btn:active{ transform: scale(.99); }
  .btn.primary{
    color:#fff;
    background: linear-gradient(135deg, rgba(17,24,39,.96), rgba(17,24,39,.80));
    box-shadow: 0 14px 28px rgba(0,0,0,.20);
    flex: 1;
  }
  .btn:disabled{ opacity: .65; cursor:not-allowed; }

  /* Footer (glass) */
  footer{
    position: fixed;
    left:0; right:0;
    bottom: 0;
    z-index: 11;
    padding: 10px 14px calc(10px + env(safe-area-inset-bottom));
    background: rgba(255,255,255,.16);
    backdrop-filter: blur(18px) saturate(1.25);
    -webkit-backdrop-filter: blur(18px) saturate(1.25);
    border-top: 1px solid rgba(255,255,255,.22);
    font-size: 12px;
    color: rgba(17,24,39,.62);
    text-align: center;
  }

  /* Thank you GIF ONLY (fullscreen) */
  #thankyou{
    display:none;
    min-height: 100svh;
    align-items:center;
    justify-content:center;
    padding: 0 16px;
    position: relative;
    z-index: 2;
  }
  #thankyou img{
    width:100%;
    max-width: 460px;
    height:auto;
    display:block;
    filter: drop-shadow(0 18px 40px rgba(0,0,0,.22));
    border-radius: 18px;
  }

  @media (min-width: 600px){
    .wrap{ padding: 26px; padding-bottom: 190px; }
    .card{ padding: 22px; }
    .brand-title{ font-size: 20px; }
    .emoji{ font-size: 54px; }
  }
</style>
</head>

<body>
  <div class="glow"></div>

  <!-- THANK YOU (fullscreen gif only) -->
  <div id="thankyou">
    <img alt=""
      src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXVxNjAyMWN6ZjcyYnNjbDR5aHM1YzRhbzhkZG1taGhsNTloZ253ZiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/VGuKJjZOHvbTUtFNPT/giphy.gif">
  </div>

  <!-- FORM (single scroll page) -->
  <div class="wrap" id="formWrap">
    <div class="card" id="formCard">

      <header class="brand">
        <img src="https://i.imgur.com/iB983sa.png" alt="">
        <div>
          <p class="brand-title">Environmental Management Plan Feedback</p>
          <p class="brand-sub">One-page form ‚Äî scroll to complete</p>
        </div>
      </header>

      <div class="surface">
        <h1>Tell us what you think</h1>
        <p class="muted">Fill in your name, answer the questions, then hit Submit.</p>
      </div>

      <div class="divider"></div>

      <!-- Name -->
      <div class="question-block" id="nameBlock">
        <label for="name">Name</label>
        <input id="name" type="text" placeholder="Your name" autocomplete="name" inputmode="text">
        <div class="error" id="errName">Please enter your name.</div>
      </div>

      <div class="divider"></div>

      <!-- Q1 -->
      <div class="question-block">
        <label for="q1">Q1. How confident do you feel in the current direction of the Environmental Management Plan?</label>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px;">
          <span class="badge">1 = Not confident</span>
          <span class="badge">5 = Very confident</span>
        </div>

        <div class="panel">
          <div class="panel-row">
            <div id="q1Face" class="emoji" aria-hidden="true">üòê</div>
            <div style="flex:1; min-width: 0;">
              <input id="q1" type="range" min="1" max="5" step="1" value="3" aria-label="Confidence 1 to 5">
              <div class="scale-labels" aria-hidden="true">
                <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
              </div>
            </div>
            <div class="badge">Score: <span id="q1Score">3</span></div>
          </div>
          <div class="value-text" id="q1Text">Neutral</div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Q2 -->
      <div class="question-block">
        <label for="q2">Q2. Which area gives you the most confidence?</label>

        <div class="panel">
          <div class="panel-row">
            <div id="q2Icon" class="emoji" aria-hidden="true">üéØ</div>
            <div style="flex:1; min-width: 0;">
              <input id="q2" type="range" min="1" max="5" step="1" value="1" aria-label="Area choice 1 to 5">
              <div class="scale-labels" aria-hidden="true">
                <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
              </div>
            </div>
            <div class="badge">Choice: <span id="q2Choice">1</span></div>
          </div>
          <div class="value-text" id="q2Text">Clarity of targets and direction</div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Working Group -->
      <div class="question-block">
        <label>Do you want to be in the working group?</label>

        <div class="panel">
          <div class="panel-row" style="align-items:flex-start;">
            <div id="wgIcon" class="emoji" aria-hidden="true">üòå</div>

            <div style="flex:1; min-width: 0;">
              <div class="toggle" role="group" aria-label="Working group yes or no">
                <button type="button" id="wgNo" class="active" aria-pressed="true">No</button>
                <button type="button" id="wgYes" aria-pressed="false">Yes</button>
              </div>
              <div class="hint" id="wgHint">All good ‚Äî no action needed.</div>
            </div>

            <div class="badge">Selected: <span id="wgValue">No</span></div>
          </div>

          <div class="question-block" id="wgAreasRow" style="display:none; margin-top:18px;">
            <label for="wgAreas">Awesome! in what key areas would you like to contribute</label>
            <textarea id="wgAreas" placeholder="Type key areas you'd like to contribute to..."></textarea>
          </div>
        </div>

        <div class="error" id="errSubmit"></div>
      </div>

    </div>
  </div>

  <!-- Sticky submit -->
  <div class="sticky" id="stickyBar" role="region" aria-label="Form actions">
    <div class="sticky-inner">
      <button class="btn primary" id="submitBtn" type="button">Submit</button>
    </div>
  </div>

  <footer id="footerBar">2026 | Shrunk Innovation Group | All Rights Reserved</footer>

<script>
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwNocuTu1R50Ois2tclgihzrSjmIvWQ2ZFpMdTJ3sgkYuK5UhgMY6bZdb_VlVD26Ywm5A/exec";

  // Little bump animation
  function bump(el){
    el.classList.add("bump");
    setTimeout(()=>el.classList.remove("bump"), 140);
  }

  // Q1 slider
  const q1 = document.getElementById("q1");
  const q1Face = document.getElementById("q1Face");
  const q1Score = document.getElementById("q1Score");
  const q1Text = document.getElementById("q1Text");

  const q1States = {
    1: { face:"üòû", text:"Not confident" },
    2: { face:"üôÅ", text:"Low confidence" },
    3: { face:"üòê", text:"Neutral" },
    4: { face:"üôÇ", text:"Confident" },
    5: { face:"üòÑ", text:"Very confident" }
  };

  function updateQ1(val){
    q1Face.textContent = q1States[val].face;
    q1Text.textContent = q1States[val].text;
    q1Score.textContent = val;
    bump(q1Face);
  }
  updateQ1(q1.value);
  q1.addEventListener("input", e => updateQ1(e.target.value));

  // Q2 slider
  const q2 = document.getElementById("q2");
  const q2Icon = document.getElementById("q2Icon");
  const q2Choice = document.getElementById("q2Choice");
  const q2Text = document.getElementById("q2Text");

  const areaStates = {
    1: { icon:"üéØ", text:"Clarity of targets and direction" },
    2: { icon:"‚öñÔ∏è", text:"Balance of impact, cost, effort, and time" },
    3: { icon:"üìå", text:"Initiative prioritisation" },
    4: { icon:"üß©", text:"Delivery pathway and governance" },
    5: { icon:"ü§ù", text:"Stakeholder involvement" }
  };

  function updateQ2(val){
    q2Icon.textContent = areaStates[val].icon;
    q2Text.textContent = areaStates[val].text;
    q2Choice.textContent = val;
    bump(q2Icon);
  }
  updateQ2(q2.value);
  q2.addEventListener("input", e => updateQ2(e.target.value));

  // Working group toggle
  let workingGroup = "No";
  const wgNoBtn = document.getElementById("wgNo");
  const wgYesBtn = document.getElementById("wgYes");
  const wgIcon = document.getElementById("wgIcon");
  const wgValue = document.getElementById("wgValue");
  const wgHint = document.getElementById("wgHint");
  const wgAreasRow = document.getElementById("wgAreasRow");
  const wgAreas = document.getElementById("wgAreas");

  function setWG(value){
    workingGroup = value;
    const yes = value === "Yes";

    wgNoBtn.classList.toggle("active", !yes);
    wgYesBtn.classList.toggle("active", yes);
    wgNoBtn.setAttribute("aria-pressed", String(!yes));
    wgYesBtn.setAttribute("aria-pressed", String(yes));

    wgValue.textContent = value;

    if (yes){
      wgIcon.textContent = "üôã";
      wgHint.textContent = "Awesome ‚Äî tell us where you'd like to help.";
      wgAreasRow.style.display = "block";
    } else {
      wgIcon.textContent = "üòå";
      wgHint.textContent = "All good ‚Äî no action needed.";
      wgAreasRow.style.display = "none";
      wgAreas.value = "";
    }
    bump(wgIcon);
  }

  wgNoBtn.addEventListener("click", ()=> setWG("No"));
  wgYesBtn.addEventListener("click", ()=> setWG("Yes"));
  setWG("No");

  // Submit
  const nameEl = document.getElementById("name");
  const errName = document.getElementById("errName");
  const errSubmit = document.getElementById("errSubmit");
  const submitBtn = document.getElementById("submitBtn");

  const thankyou = document.getElementById("thankyou");
  const formWrap = document.getElementById("formWrap");
  const stickyBar = document.getElementById("stickyBar");
  const footerBar = document.getElementById("footerBar");

  function showThankYou(){
    formWrap.style.display = "none";
    stickyBar.style.display = "none";
    footerBar.style.display = "none";
    thankyou.style.display = "flex";
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  submitBtn.addEventListener("click", async ()=> {
    errSubmit.style.display = "none";

    const name = nameEl.value.trim();
    if (!name){
      errName.style.display = "block";
      nameEl.focus({ preventScroll: true });
      document.getElementById("nameBlock").scrollIntoView({ behavior:"smooth", block:"center" });
      return;
    }
    errName.style.display = "none";

    const payload = {
      name,
      q1_confidence: q1.value,
      q2_area: areaStates[q2.value].text,
      working_group: workingGroup,
      working_group_areas: wgAreas.value.trim()
    };

    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";

    try{
      // CORS-safe: FormData + no-cors
      const fd = new FormData();
      Object.entries(payload).forEach(([k,v]) => fd.append(k, v));
      await fetch(WEB_APP_URL, { method:"POST", mode:"no-cors", body: fd });

      // Can't read response in no-cors; assume success if no exception
      showThankYou();
    } catch(e){
      errSubmit.textContent = "Submit failed: " + (e.message || e);
      errSubmit.style.display = "block";
      window.scrollTo({ top: 0, behavior: "smooth" });
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = "Submit";
    }
  });
</script>
</body>
</html>
