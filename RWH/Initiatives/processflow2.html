<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainability Initiative Workshop - Royal Women's Hospital Melbourne</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: #f8fafc;
            color: #0f172a;
            line-height: 1.5;
        }

        .playbook-header {
            font-family: 'Merriweather', serif;
        }

        /* Layout utilities */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .container-md {
            max-width: 1152px;
            margin: 0 auto;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .items-start {
            align-items: flex-start;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }

        .grid {
            display: grid;
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-cols-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        .col-span-2 {
            grid-column: span 2;
        }

        @media (min-width: 768px) {
            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            .md\:grid-cols-3 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .lg\:grid-cols-4 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Spacing */
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }

        .px-4 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-5 { padding-left: 1.25rem; padding-right: 1.25rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }

        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }

        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }

        /* Typography */
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .text-5xl { font-size: 3rem; line-height: 1; }

        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-black { font-weight: 900; }

        .uppercase { text-transform: uppercase; }
        .italic { font-style: italic; }

        .tracking-wide { letter-spacing: 0.025em; }
        .tracking-wider { letter-spacing: 0.05em; }

        .leading-relaxed { line-height: 1.625; }

        /* Colors */
        .text-white { color: #ffffff; }
        .text-slate-500 { color: #64748b; }
        .text-slate-600 { color: #475569; }
        .text-slate-700 { color: #334155; }
        .text-slate-900 { color: #0f172a; }
        .text-amber-900 { color: #78350f; }
        .text-green-600 { color: #16a34a; }
        .text-blue-600 { color: #2563eb; }
        .text-purple-600 { color: #9333ea; }
        .text-red-600 { color: #dc2626; }

        .bg-white { background-color: #ffffff; }
        .bg-slate-50 { background-color: #f8fafc; }
        .bg-slate-100 { background-color: #f1f5f9; }
        .bg-slate-300 { background-color: #cbd5e1; }
        .bg-slate-700 { background-color: #334155; }
        .bg-slate-900 { background-color: #0f172a; }
        .bg-amber-50 { background-color: #fffbeb; }

        .bg-gradient-to-r {
            background-image: linear-gradient(to right, var(--tw-gradient-stops));
        }

        .bg-gradient-to-br {
            background-image: linear-gradient(to bottom right, var(--tw-gradient-stops));
        }

        .from-green-500 { --tw-gradient-from: #22c55e; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-emerald-500 { --tw-gradient-to: #10b981; }
        .from-green-600 { --tw-gradient-from: #16a34a; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-emerald-600 { --tw-gradient-to: #059669; }
        .from-slate-900 { --tw-gradient-from: #0f172a; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-slate-700 { --tw-gradient-to: #334155; }
        .from-slate-300 { --tw-gradient-from: #cbd5e1; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-slate-400 { --tw-gradient-to: #94a3b8; }
        .from-slate-400 { --tw-gradient-from: #94a3b8; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-slate-300 { --tw-gradient-to: #cbd5e1; }

        /* Borders */
        .border { border-width: 1px; }
        .border-2 { border-width: 2px; }
        .border-4 { border-width: 4px; }
        .border-t { border-top-width: 1px; }
        .border-b { border-bottom-width: 1px; }
        .border-r { border-right-width: 1px; }
        .border-l-4 { border-left-width: 4px; }

        .border-slate-200 { border-color: #e2e8f0; }
        .border-slate-300 { border-color: #cbd5e1; }
        .border-slate-900 { border-color: #0f172a; }
        .border-amber-200 { border-color: #fde68a; }

        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-full { border-radius: 9999px; }
        .rounded-r-lg { border-top-right-radius: 0.5rem; border-bottom-right-radius: 0.5rem; }

        /* Shadows */
        .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .shadow-md { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }

        /* Sizing */
        .w-3 { width: 0.75rem; }
        .w-6 { width: 1.5rem; }
        .w-7 { width: 1.75rem; }
        .w-8 { width: 2rem; }
        .w-10 { width: 2.5rem; }
        .w-12 { width: 3rem; }
        .w-14 { width: 3.5rem; }
        .w-24 { width: 6rem; }
        .h-1 { height: 0.25rem; }
        .h-3 { height: 0.75rem; }
        .h-6 { height: 1.5rem; }
        .h-7 { height: 1.75rem; }
        .h-8 { height: 2rem; }
        .h-10 { height: 2.5rem; }
        .h-12 { height: 3rem; }
        .h-14 { height: 3.5rem; }
        .h-0\.5 { height: 0.125rem; }

        .min-w-20 { min-width: 5rem; }
        .max-w-40 { max-width: 10rem; }

        .min-h-screen { min-height: 100vh; }

        .flex-1 { flex: 1 1 0%; }
        .flex-shrink-0 { flex-shrink: 0; }

        /* Position */
        .relative { position: relative; }
        .absolute { position: absolute; }

        .left-0 { left: 0; }
        .left-6 { left: 1.5rem; }
        .top-full { top: 100%; }

        /* Display */
        .hidden { display: none; }
        .overflow-hidden { overflow: hidden; }

        /* Cursor */
        .cursor-pointer { cursor: pointer; }

        /* Buttons */
        button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        button:not(:disabled):hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        .btn-primary {
            background-color: #0f172a;
            color: white;
        }

        .btn-primary:not(:disabled):hover {
            background-color: #334155;
        }

        .btn-secondary {
            background-color: white;
            border: 2px solid #cbd5e1;
            color: #334155;
        }

        .btn-secondary:not(:disabled):hover {
            border-color: #0f172a;
            color: #0f172a;
        }

        /* Cards */
        .card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }

        .card-header {
            background-color: #f8fafc;
            padding: 2rem;
            border-bottom: 1px solid #e2e8f0;
        }

        /* Step indicators */
        .step-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 3rem;
            height: 3rem;
            border-radius: 0.5rem;
            font-weight: 700;
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-indicator:hover {
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        .step-indicator.complete {
            background: linear-gradient(135deg, #059669, #10b981);
        }

        .step-indicator.active {
            background: linear-gradient(135deg, #1e293b, #334155);
            transform: scale(1.1);
            box-shadow: 0 0 0 4px #cbd5e1;
        }

        /* ✅ NEW: Inactive (not progressed yet) step */
        .step-indicator.inactive {
            background-color: #e5e7eb; /* light grey */
            color: #ffffff;           /* white icon */
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }

        .step-indicator.inactive:hover {
            background-color: #d1d5db;
        }

        /* Progress bar */
        .progress-bar {
            height: 0.25rem;
            background-color: #e2e8f0;
            border-radius: 9999px;
            min-width: 1.25rem;
            max-width: 2.5rem;
            flex: 1;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #22c55e, #10b981);
            border-radius: 9999px;
            transition: width 0.5s ease;
        }

        /* Option cards */
        .option-card {
            position: relative;
            padding: 1.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.75rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .option-card.selected {
            border-color: #1e293b;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
        }

        .option-card.selected::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to bottom, #3b82f6, #06b6d4);
            border-top-left-radius: 0.75rem;
            border-bottom-left-radius: 0.75rem;
        }

        .option-card.selected .option-title {
            color: white;
        }

        .option-card.selected .option-detail {
            color: rgba(255, 255, 255, 0.9);
        }

        .option-card.selected .option-meta {
            color: rgba(255, 255, 255, 0.8);
            border-top-color: rgba(255, 255, 255, 0.2);
        }

        .option-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: #0f172a;
        }

        .option-detail {
            line-height: 1.625;
            margin-bottom: 1rem;
            color: #475569;
        }

        .option-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .option-checkbox {
            flex-shrink: 0;
            width: 1.75rem;
            height: 1.75rem;
            border: 2px solid #cbd5e1;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 0.25rem;
            background: white;
        }

        .option-card.selected .option-checkbox {
            background: white;
            border-color: white;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes flowPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .slide-in { animation: slideIn 0.5s ease-out; }
        .fade-in-up { animation: fadeInUp 0.6s ease-out forwards; opacity: 0; }
        .connection-line { animation: flowPulse 2s ease-in-out infinite; }

        /* Process nodes */
        .process-node {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .process-node:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        .phase-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 3rem;
            height: 3rem;
            border-radius: 0.75rem;
            color: white;
            font-weight: 900;
            font-size: 1.125rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        .metric-card {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 0.75rem;
        }

        .icon-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            padding: 0.75rem;
        }

        /* Alert */
        .alert {
            background-color: #fffbeb;
            border: 1px solid #fde68a;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
        }

        /* Success banner */
        .success-banner {
            background: linear-gradient(to right, #16a34a, #059669);
            color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .text-5xl { font-size: 2rem; }
            .text-4xl { font-size: 1.75rem; }
            .grid-cols-4 { grid-template-columns: repeat(2, 1fr); }
        }

        /* Utility classes */
        .w-full { width: 100%; }
        .text-center { text-align: center; }
        .last\:border-r-0:last-child { border-right: 0; }

        /* Custom option form */
        .custom-form {
            background-color: #f1f5f9;
            border: 2px dashed #cbd5e1;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .form-group { margin-bottom: 1rem; }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #334155;
            margin-bottom: 0.5rem;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #0f172a;
            box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.1);
        }

        .form-textarea { min-height: 80px; resize: vertical; }

        .form-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        .btn-add-custom {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background-color: #f8fafc;
            border: 2px dashed #cbd5e1;
            border-radius: 0.5rem;
            color: #475569;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-add-custom:hover {
            background-color: #f1f5f9;
            border-color: #0f172a;
            color: #0f172a;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn-cancel {
            background-color: white;
            border: 1px solid #cbd5e1;
            color: #475569;
        }

        .btn-cancel:hover {
            background-color: #f8fafc;
            border-color: #94a3b8;
        }

        .custom-badge {
            display: inline-block;
            background-color: #f59e0b;
            color: white;
            font-size: 0.625rem;
            font-weight: 700;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-left: 0.5rem;
        }

        /* Footer */
        .footer {
            background-color: #0f172a;
            color: #94a3b8;
            text-align: center;
            padding: 2rem 1.5rem;
            margin-top: 4rem;
            font-size: 0.875rem;
        }

        .footer-content {
            max-width: 1152px;
            margin: 0 auto;
        }

        /* -------------------------------------------------------
           ✅ NEW: Mobile optimisation (activated via body.mobile)
        -------------------------------------------------------- */
        body.mobile .container-md {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        body.mobile .p-8 { padding: 1.25rem; }
        body.mobile .p-6 { padding: 1rem; }
        body.mobile .card-header { padding: 1.25rem; }

        body.mobile .text-5xl { font-size: 2rem; line-height: 1.1; }
        body.mobile .text-4xl { font-size: 1.5rem; line-height: 1.15; }
        body.mobile .text-xl  { font-size: 1rem; }
        body.mobile .text-lg  { font-size: 0.95rem; }

        body.mobile .step-indicator {
            width: 2.5rem;
            height: 2.5rem;
        }

        body.mobile .step-indicator svg {
            width: 18px;
            height: 18px;
        }

        body.mobile .progress-bar {
            min-width: 0.75rem;
            max-width: 1.5rem;
            height: 0.2rem;
        }

        body.mobile .option-card {
            padding: 1rem;
        }

        /* stack nav buttons on mobile */
        body.mobile .navigation-buttons {
            flex-direction: column;
            gap: 0.75rem;
        }

        body.mobile .navigation-buttons button {
            width: 100%;
        }

        /* reduce hover effects on touch/mobile */
        body.mobile button:not(:disabled):hover,
        body.mobile .option-card:hover {
            transform: none;
            box-shadow: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Icon components (same as before)
        const ChevronLeft = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        );
        
        const ChevronRight = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );
        
        const Check = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );
        
        const ArrowRight = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );
        
        const Home = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        );
        
        const Target = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="12" r="6"></circle>
                <circle cx="12" cy="12" r="2"></circle>
            </svg>
        );
        
        const Users = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );
        
        const ClipboardCheck = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                <path d="M9 14l2 2 4-4"></path>
            </svg>
        );
        
        const TrendingUp = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );
        
        const DollarSign = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
        );
        
        const Rocket = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path>
                <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path>
                <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path>
                <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path>
            </svg>
        );
        
        const BarChart3 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 3v18h18"></path>
                <path d="M18 17V9"></path>
                <path d="M13 17V5"></path>
                <path d="M8 17v-3"></path>
            </svg>
        );
        
        const MessageSquare = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
        );
        
        const RefreshCw = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
        );
        
        const AlertCircle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );
        
        const CheckCircle2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="m9 12 2 2 4-4"></path>
            </svg>
        );
        
        const Clock = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Plus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Scale = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"></path>
                <path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"></path>
                <path d="M7 21h10"></path>
                <path d="M12 3v18"></path>
                <path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"></path>
            </svg>
        );

        // Main workshop component
        const SustainabilityWorkshop = () => {
          const [currentStep, setCurrentStep] = useState(0);
          const [selections, setSelections] = useState({});
          const [showDiagram, setShowDiagram] = useState(false);
          const [customOptions, setCustomOptions] = useState({});
          const [showCustomForm, setShowCustomForm] = useState(false);
          const [customFormData, setCustomFormData] = useState({
            label: '',
            detail: '',
            timeline: '',
            resources: '',
            risks: ''
          });

          /* ✅ NEW: Mobile detect -> toggle body.mobile */
          useEffect(() => {
            const mq = window.matchMedia("(max-width: 768px), (pointer: coarse)");
            const apply = () => {
              document.body.classList.toggle("mobile", mq.matches);
            };
            apply();

            if (mq.addEventListener) mq.addEventListener("change", apply);
            else mq.addListener(apply);

            return () => {
              if (mq.removeEventListener) mq.removeEventListener("change", apply);
              else mq.removeListener(apply);
              document.body.classList.remove("mobile");
            };
          }, []);

          const steps = [
            {
              id: 'scope',
              title: 'Initiative Scope',
              icon: Target,
              phase: 'Foundation',
              description: 'Define the primary focus area for your sustainability initiative',
              strategicQuestion: 'What environmental impact area presents the greatest opportunity for meaningful change at RWH?',
              options: [
                { 
                  value: 'energy', 
                  label: 'Energy & Carbon Reduction',
                  detail: 'Focus on reducing energy consumption, transitioning to renewables, and lowering carbon emissions',
                  timeline: '18-36 months',
                  resources: 'High capital, dedicated energy manager',
                  risks: 'Grid dependency, upfront costs',
                  kpis: ['kWh reduction %', 'Scope 1 & 2 emissions', 'Renewable energy %']
                },
                { 
                  value: 'waste', 
                  label: 'Waste Management & Circular Economy',
                  detail: 'Implement comprehensive waste reduction, recycling programmes, and circular procurement practices',
                  timeline: '12-24 months',
                  resources: 'Medium capital, waste coordinator',
                  risks: 'Clinical waste regulations, staff behaviour change',
                  kpis: ['Landfill diversion %', 'Waste per patient', 'Recycling rate']
                },
                { 
                  value: 'water', 
                  label: 'Water Conservation',
                  detail: 'Reduce water usage, implement water-efficient systems, and rainwater harvesting',
                  timeline: '12-18 months',
                  resources: 'Medium capital, facilities team',
                  risks: 'Hygiene standards, infrastructure constraints',
                  kpis: ['Water use per bed day', 'Harvested water volume', 'Peak demand reduction']
                },
                { 
                  value: 'procurement', 
                  label: 'Sustainable Procurement',
                  detail: 'Establish green purchasing policies and supplier sustainability requirements',
                  timeline: '24-36 months',
                  resources: 'Low capital, procurement policy reform',
                  risks: 'Supplier availability, cost premiums',
                  kpis: ['Sustainable product %', 'Supplier compliance', 'Scope 3 emissions']
                },
                { 
                  value: 'comprehensive', 
                  label: 'Comprehensive Programme',
                  detail: 'Multi-faceted approach addressing multiple sustainability areas simultaneously',
                  timeline: '36-60 months',
                  resources: 'High capital, dedicated team',
                  risks: 'Complexity, resource dilution',
                  kpis: ['Multi-domain scorecard', 'Carbon footprint', 'Environmental cost savings']
                }
              ]
            },
            {
              id: 'stakeholders',
              title: 'Stakeholder Engagement',
              icon: Users,
              phase: 'Foundation',
              description: 'Identify the primary stakeholder groups to involve in the initiative',
              strategicQuestion: 'Who needs to be at the table to ensure buy-in, resources, and sustained momentum?',
              options: [
                { 
                  value: 'clinical', 
                  label: 'Clinical Teams First',
                  detail: 'Engage nurses, doctors, and allied health professionals as primary champions',
                  timeline: '6-12 months to build network',
                  resources: 'Protected time, clinical champions',
                  risks: 'Competing priorities, clinical resistance',
                  kpis: ['Champion participation', 'Clinical engagement score', 'Frontline adoption rate']
                },
                { 
                  value: 'operations', 
                  label: 'Operations & Facilities',
                  detail: 'Lead through facilities management, engineering, and operational teams',
                  timeline: '3-6 months to establish',
                  resources: 'Operational budget, technical expertise',
                  risks: 'Limited clinical input, siloed approach',
                  kpis: ['Project completion rate', 'Operational efficiency', 'Technical adoption']
                },
                { 
                  value: 'executive', 
                  label: 'Executive-Led',
                  detail: 'Board and executive team drive the initiative with top-down support',
                  timeline: '2-3 months for mandate',
                  resources: 'Executive sponsorship, strategic budget',
                  risks: 'Staff disengagement, perceived mandate',
                  kpis: ['Executive visibility', 'Strategic alignment', 'Resource allocation']
                },
                { 
                  value: 'grassroots', 
                  label: 'Grassroots Network',
                  detail: 'Build a volunteer network of sustainability champions across all departments',
                  timeline: '12-18 months to scale',
                  resources: 'Coordination support, recognition programme',
                  risks: 'Volunteer burnout, inconsistent effort',
                  kpis: ['Active champions', 'Cross-department reach', 'Initiative origination']
                },
                { 
                  value: 'collaborative', 
                  label: 'Collaborative Governance',
                  detail: 'Establish a cross-functional steering committee with representatives from all areas',
                  timeline: '3-6 months to establish',
                  resources: 'Governance structure, meeting time',
                  risks: 'Decision delays, consensus challenges',
                  kpis: ['Committee effectiveness', 'Cross-functional projects', 'Decision velocity']
                }
              ]
            },
            {
              id: 'assessment',
              title: 'Baseline Assessment',
              icon: ClipboardCheck,
              phase: 'Planning',
              description: 'Choose the method for assessing current sustainability performance',
              strategicQuestion: 'How will we establish where we are today to measure progress tomorrow?',
              options: [
                { 
                  value: 'audit', 
                  label: 'Comprehensive Sustainability Audit',
                  detail: 'Detailed assessment of all operations, baseline measurements, and gap analysis',
                  timeline: '4-6 months',
                  resources: 'External consultants, data systems',
                  risks: 'Cost, time intensive, analysis paralysis',
                  kpis: ['Baseline established', 'Gap analysis complete', 'Audit recommendations']
                },
                { 
                  value: 'quick', 
                  label: 'Rapid Assessment',
                  detail: 'Quick wins identification and high-impact opportunity mapping',
                  timeline: '4-8 weeks',
                  resources: 'Internal team, existing data',
                  risks: 'Incomplete picture, missed opportunities',
                  kpis: ['Quick wins identified', 'Priority ranking', 'Initial baselines']
                },
                { 
                  value: 'certification', 
                  label: 'External Certification Framework',
                  detail: 'Use Green Star Healthcare or similar framework for structured assessment',
                  timeline: '6-12 months',
                  resources: 'Certification fees, dedicated coordinator',
                  risks: 'Framework constraints, ongoing compliance',
                  kpis: ['Rating achieved', 'Criteria met', 'Certification status']
                },
                { 
                  value: 'benchmark', 
                  label: 'Peer Benchmarking',
                  detail: 'Compare performance against other healthcare facilities and industry standards',
                  timeline: '2-3 months',
                  resources: 'Benchmarking data access, analysis capacity',
                  risks: 'Data availability, comparability issues',
                  kpis: ['Peer comparison', 'Performance quartile', 'Best practice gaps']
                },
                { 
                  value: 'phased', 
                  label: 'Phased Assessment',
                  detail: 'Start with priority areas, expand assessment over time',
                  timeline: '3-6 months initial, ongoing',
                  resources: 'Flexible budget, iterative approach',
                  risks: 'Incomplete initial view, scope creep',
                  kpis: ['Phases completed', 'Coverage expansion', 'Assessment depth']
                }
              ]
            },
            {
              id: 'goals',
              title: 'Target Setting',
              icon: TrendingUp,
              phase: 'Planning',
              description: 'Define the approach to setting sustainability targets',
              strategicQuestion: 'What level of ambition will drive meaningful change while remaining achievable?',
              options: [
                { 
                  value: 'science', 
                  label: 'Science-Based Targets',
                  detail: 'Align with climate science and net-zero pathways (e.g., 1.5°C warming limit)',
                  timeline: '12-18 months for validation',
                  resources: 'External validation, technical expertise',
                  risks: 'Aggressive targets, long-term uncertainty',
                  kpis: ['SBTi validation', 'Pathway alignment', 'Annual progress vs. target']
                },
                { 
                  value: 'regulatory', 
                  label: 'Regulatory Compliance Plus',
                  detail: 'Meet all requirements and exceed by specific percentages',
                  timeline: '6-12 months',
                  resources: 'Compliance monitoring, buffer capacity',
                  risks: 'Limited ambition, reactive approach',
                  kpis: ['Compliance status', 'Exceed % achieved', 'Regulatory readiness']
                },
                { 
                  value: 'incremental', 
                  label: 'Incremental Improvement',
                  detail: 'Set year-on-year improvement targets (e.g., 5% annual reduction)',
                  timeline: 'Annual cycles',
                  resources: 'Continuous improvement capacity',
                  risks: 'Diminishing returns, lacks urgency',
                  kpis: ['Annual improvement %', 'Cumulative reduction', 'Target achievement rate']
                },
                { 
                  value: 'aspirational', 
                  label: 'Aspirational Vision',
                  detail: 'Set ambitious long-term goals (e.g., carbon neutral by 2035)',
                  timeline: 'Long-term (10-15 years)',
                  resources: 'Transformational investment, innovation',
                  risks: 'Feasibility uncertainty, technology dependence',
                  kpis: ['Vision milestones', 'Trajectory tracking', 'Innovation adoption']
                },
                { 
                  value: 'balanced', 
                  label: 'Balanced Scorecard',
                  detail: 'Multiple metrics across environmental, social, and economic dimensions',
                  timeline: 'Quarterly reviews',
                  resources: 'Comprehensive data systems',
                  risks: 'Complexity, conflicting priorities',
                  kpis: ['Scorecard balance', 'Multi-dimensional performance', 'Integrated outcomes']
                }
              ]
            },
            {
              id: 'prioritisation',
              title: 'Initiative Prioritisation',
              icon: Scale,
              phase: 'Planning',
              description: 'Define the approach for evaluating and prioritising sustainability initiatives',
              strategicQuestion: 'How will we systematically assess and rank competing sustainability opportunities?',
              options: [
                { 
                  value: 'weighted_matrix', 
                  label: 'Comprehensive Weighted Matrix',
                  detail: 'Multi-criteria assessment including emissions impact, cost, effort, and time to implement with customisable weightings',
                  timeline: '2-4 weeks to establish',
                  resources: 'Analysis team, decision framework',
                  risks: 'Subjectivity in weighting, analysis paralysis',
                  kpis: ['Emissions impact score', 'Cost-benefit ratio', 'Implementation feasibility', 'Prioritisation consensus']
                },
                { 
                  value: 'emissions_first', 
                  label: 'Emissions Impact Priority',
                  detail: 'Prioritise initiatives primarily by their contribution to RWH emissions reduction goals, with secondary consideration of feasibility',
                  timeline: '1-2 weeks to establish',
                  resources: 'Emissions baseline data, impact modelling',
                  risks: 'High-cost initiatives prioritised, quick wins missed',
                  kpis: ['Tonnes CO2e reduction', 'Pathway to net-zero', 'Target contribution %']
                },
                { 
                  value: 'roi_optimisation', 
                  label: 'ROI Optimisation',
                  detail: 'Balance emissions impact against investment required, prioritising initiatives with best return per dollar spent',
                  timeline: '2-3 weeks to establish',
                  resources: 'Financial modelling, cost-benefit analysis',
                  risks: 'Low-cost bias, transformational projects deprioritised',
                  kpis: ['Cost per tonne CO2e', 'Payback period', 'Net present value']
                },
                { 
                  value: 'quick_wins', 
                  label: 'Quick Wins Strategy',
                  detail: 'Prioritise low-effort, short-timeframe initiatives to build momentum and demonstrate early success',
                  timeline: '1 week to establish',
                  resources: 'Rapid assessment, agile decision-making',
                  risks: 'Limited impact, missing strategic opportunities',
                  kpis: ['Time to implementation', 'Initiative completion rate', 'Momentum indicators']
                },
                { 
                  value: 'balanced_scorecard', 
                  label: 'Balanced Scorecard Approach',
                  detail: 'Evaluate across emissions impact, cost, effort, time, plus strategic alignment, stakeholder support, and co-benefits',
                  timeline: '3-4 weeks to establish',
                  resources: 'Multi-stakeholder input, scorecard framework',
                  risks: 'Complexity, slower decision-making',
                  kpis: ['Balanced score', 'Stakeholder alignment', 'Portfolio diversity', 'Strategic fit']
                },
                { 
                  value: 'staged_portfolio', 
                  label: 'Staged Portfolio',
                  detail: 'Create a balanced portfolio: quick wins for momentum, medium-term projects for impact, long-term transformational initiatives',
                  timeline: '2-3 weeks to establish',
                  resources: 'Portfolio management, staging framework',
                  risks: 'Resource spreading, coordination complexity',
                  kpis: ['Portfolio balance', 'Stage progression', 'Cumulative impact', 'Resource allocation']
                }
              ]
            },
            {
              id: 'resources',
              title: 'Resource Mobilisation',
              icon: DollarSign,
              phase: 'Planning',
              description: 'Determine how to fund and resource the initiative',
              strategicQuestion: 'How will we secure and sustain the financial and human resources needed?',
              options: [
                { 
                  value: 'capital', 
                  label: 'Capital Investment Programme',
                  detail: 'Dedicated multi-year budget for infrastructure and system upgrades',
                  timeline: 'Multi-year allocation',
                  resources: '$2-10M+, project management',
                  risks: 'Capital availability, competing priorities',
                  kpis: ['Capital deployed', 'ROI', 'Project completion']
                },
                { 
                  value: 'revolving', 
                  label: 'Revolving Green Fund',
                  detail: 'Self-funding model where savings are reinvested into new projects',
                  timeline: '12-18 months to establish',
                  resources: 'Seed funding, financial tracking',
                  risks: 'Initial funding, savings validation',
                  kpis: ['Fund balance', 'Reinvestment rate', 'Cumulative savings']
                },
                { 
                  value: 'grants', 
                  label: 'External Funding Focus',
                  detail: 'Prioritise government grants, partnerships, and external funding sources',
                  timeline: 'Ongoing applications',
                  resources: 'Grant writing capacity, partnership development',
                  risks: 'Funding uncertainty, application burden',
                  kpis: ['Grants secured', 'External funding %', 'Partnership value']
                },
                { 
                  value: 'integrated', 
                  label: 'Integrated BAU Budget',
                  detail: 'Embed sustainability considerations into all operational and capital budgets',
                  timeline: 'Annual budget cycles',
                  resources: 'Policy integration, budget process reform',
                  risks: 'Diffused accountability, competing needs',
                  kpis: ['Sustainability budget %', 'Policy compliance', 'Integrated decisions']
                },
                { 
                  value: 'phased', 
                  label: 'Phased Funding Approach',
                  detail: 'Start small with quick wins, scale up as benefits are demonstrated',
                  timeline: 'Phase-dependent',
                  resources: 'Initial pilot budget, performance data',
                  risks: 'Momentum loss, scale-up delays',
                  kpis: ['Phase progression', 'Demonstrated ROI', 'Scale achieved']
                }
              ]
            },
            {
              id: 'implementation',
              title: 'Execution Strategy',
              icon: Rocket,
              phase: 'Delivery',
              description: 'Select the rollout approach for sustainability initiatives',
              strategicQuestion: 'What implementation pathway will maximise learning while managing risk?',
              options: [
                { 
                  value: 'pilot', 
                  label: 'Pilot Programmes',
                  detail: 'Test initiatives in specific departments before hospital-wide rollout',
                  timeline: '6-12 months pilot + rollout',
                  resources: 'Pilot sites, evaluation capacity',
                  risks: 'Pilot failure, scale-up challenges',
                  kpis: ['Pilot success metrics', 'Lessons documented', 'Scale-up readiness']
                },
                { 
                  value: 'concurrent', 
                  label: 'Concurrent Rollout',
                  detail: 'Launch multiple initiatives simultaneously across the organisation',
                  timeline: '3-6 months intensive',
                  resources: 'High coordination, change capacity',
                  risks: 'Change fatigue, quality issues',
                  kpis: ['Initiatives launched', 'Parallel adoption', 'Integration effectiveness']
                },
                { 
                  value: 'sequential', 
                  label: 'Sequential Implementation',
                  detail: 'Complete one initiative before starting the next, building momentum',
                  timeline: '18-36 months staged',
                  resources: 'Focused resources per initiative',
                  risks: 'Slow progress, lost opportunities',
                  kpis: ['Completion rate', 'Sequential success', 'Momentum indicators']
                },
                { 
                  value: 'agile', 
                  label: 'Agile Iterations',
                  detail: 'Short cycles of planning, testing, learning, and adapting',
                  timeline: '2-4 week sprints',
                  resources: 'Agile team, rapid decision-making',
                  risks: 'Direction changes, sprint discipline',
                  kpis: ['Sprint velocity', 'Iteration learnings', 'Adaptation rate']
                },
                { 
                  value: 'integrated', 
                  label: 'Integration with Major Projects',
                  detail: 'Embed sustainability into existing capital works and refurbishments',
                  timeline: 'Project-dependent',
                  resources: 'Project integration capacity',
                  risks: 'Project delays, dependency issues',
                  kpis: ['Integration rate', 'Project sustainability', 'Embedded benefits']
                }
              ]
            },
            {
              id: 'monitoring',
              title: 'Performance Management',
              icon: BarChart3,
              phase: 'Delivery',
              description: 'Choose how to track progress and measure success',
              strategicQuestion: 'How will we maintain visibility and accountability for results?',
              options: [
                { 
                  value: 'digital', 
                  label: 'Digital Dashboard',
                  detail: 'Real-time monitoring platform with automated data collection and visualisation',
                  timeline: '6-9 months development',
                  resources: 'IT development, system integration',
                  risks: 'Data quality, system complexity',
                  kpis: ['System uptime', 'Data completeness', 'User engagement']
                },
                { 
                  value: 'quarterly', 
                  label: 'Quarterly Reporting Cycle',
                  detail: 'Regular reports to executive and board with KPI tracking',
                  timeline: 'Quarterly cadence',
                  resources: 'Reporting team, data compilation',
                  risks: 'Lagging indicators, reporting burden',
                  kpis: ['Report timeliness', 'KPI achievement', 'Action item closure']
                },
                { 
                  value: 'integrated', 
                  label: 'Integrated Performance System',
                  detail: 'Embed sustainability metrics into existing performance management systems',
                  timeline: '3-6 months integration',
                  resources: 'System modification, training',
                  risks: 'Metric overload, diluted focus',
                  kpis: ['Integration completeness', 'Dual accountability', 'Performance correlation']
                },
                { 
                  value: 'external', 
                  label: 'External Verification',
                  detail: 'Third-party audits and public disclosure (e.g., sustainability reports)',
                  timeline: 'Annual verification',
                  resources: 'Audit fees, report production',
                  risks: 'Public scrutiny, verification costs',
                  kpis: ['Verification status', 'Report quality', 'Stakeholder feedback']
                },
                { 
                  value: 'live', 
                  label: 'Live Display & Engagement',
                  detail: 'Public displays showing real-time performance to engage staff and visitors',
                  timeline: '3-6 months deployment',
                  resources: 'Display infrastructure, content management',
                  risks: 'Negative visibility, engagement drop',
                  kpis: ['Awareness levels', 'Behavioural change', 'Display impact']
                }
              ]
            },
            {
              id: 'communication',
              title: 'Engagement & Communication',
              icon: MessageSquare,
              phase: 'Delivery',
              description: 'Define how to communicate the initiative and engage the organisation',
              strategicQuestion: 'How will we inspire action and maintain momentum across the organisation?',
              options: [
                { 
                  value: 'campaign', 
                  label: 'Awareness Campaign',
                  detail: 'Branded campaign with regular updates, stories, and staff engagement activities',
                  timeline: '12-18 months intensive',
                  resources: 'Campaign budget, creative resources',
                  risks: 'Message fatigue, campaign end',
                  kpis: ['Awareness %', 'Engagement rate', 'Brand recognition']
                },
                { 
                  value: 'integration', 
                  label: 'BAU Communication',
                  detail: 'Integrate sustainability messaging into existing communication channels',
                  timeline: 'Ongoing integration',
                  resources: 'Content development, channel access',
                  risks: 'Message dilution, low visibility',
                  kpis: ['Message reach', 'Channel utilisation', 'Recall rate']
                },
                { 
                  value: 'education', 
                  label: 'Education Programme',
                  detail: 'Training, workshops, and resources to build sustainability literacy',
                  timeline: '12-24 months rollout',
                  resources: 'Training development, delivery capacity',
                  risks: 'Attendance challenges, knowledge retention',
                  kpis: ['Training completion', 'Knowledge gain', 'Behaviour application']
                },
                { 
                  value: 'celebration', 
                  label: 'Wins & Celebration Focus',
                  detail: 'Highlight successes, recognise champions, and celebrate milestones',
                  timeline: 'Ongoing recognition',
                  resources: 'Recognition programme, event budget',
                  risks: 'Recognition equity, authenticity',
                  kpis: ['Champions recognised', 'Celebration events', 'Morale indicators']
                },
                { 
                  value: 'transparent', 
                  label: 'Transparent Reporting',
                  detail: 'Open sharing of progress, challenges, and learnings with all stakeholders',
                  timeline: 'Regular updates',
                  resources: 'Reporting infrastructure, openness',
                  risks: 'Negative perceptions, information overload',
                  kpis: ['Report accessibility', 'Transparency rating', 'Trust levels']
                }
              ]
            },
            {
              id: 'review',
              title: 'Continuous Improvement',
              icon: RefreshCw,
              phase: 'Evolution',
              description: 'Establish how to evaluate and evolve the initiative over time',
              strategicQuestion: 'How will we ensure the programme remains relevant and continues to deliver value?',
              options: [
                { 
                  value: 'annual', 
                  label: 'Annual Strategic Review',
                  detail: 'Comprehensive yearly assessment with strategy refresh and target updates',
                  timeline: 'Annual cycle',
                  resources: 'Review team, strategy facilitation',
                  risks: 'Review fatigue, slow adaptation',
                  kpis: ['Review completion', 'Strategy updates', 'Target adjustments']
                },
                { 
                  value: 'continuous', 
                  label: 'Continuous Improvement Cycles',
                  detail: 'Regular feedback loops with ongoing refinement and adaptation',
                  timeline: 'Monthly/quarterly cycles',
                  resources: 'Improvement culture, rapid response',
                  risks: 'Direction instability, change overload',
                  kpis: ['Improvement initiatives', 'Cycle time', 'Adoption rate']
                },
                { 
                  value: 'milestone', 
                  label: 'Milestone-Based Review',
                  detail: 'Formal evaluation at key project milestones and achievement points',
                  timeline: 'Event-driven',
                  resources: 'Evaluation framework, milestone tracking',
                  risks: 'Review gaps, milestone delays',
                  kpis: ['Milestone achievement', 'Lessons captured', 'Course corrections']
                },
                { 
                  value: 'external', 
                  label: 'External Review Panel',
                  detail: 'Independent experts provide periodic assessments and recommendations',
                  timeline: 'Bi-annual reviews',
                  resources: 'Panel fees, expert access',
                  risks: 'External disconnect, recommendation acceptance',
                  kpis: ['Panel recommendations', 'Implementation rate', 'Expert satisfaction']
                },
                { 
                  value: 'adaptive', 
                  label: 'Adaptive Management',
                  detail: 'Flexible approach that responds to emerging opportunities and challenges',
                  timeline: 'Continuous monitoring',
                  resources: 'Flexible resources, decision agility',
                  risks: 'Lack of structure, accountability drift',
                  kpis: ['Adaptation events', 'Response time', 'Outcome improvement']
                }
              ]
            }
          ];

          const handleOptionSelect = (optionValue) => {
            setSelections({
              ...selections,
              [steps[currentStep].id]: optionValue
            });
          };

          const handleNext = () => {
            if (currentStep < steps.length - 1) {
              setCurrentStep(currentStep + 1);
              document.documentElement.scrollTop = 0;
              document.body.scrollTop = 0;
            } else {
              setShowDiagram(true);
              document.documentElement.scrollTop = 0;
              document.body.scrollTop = 0;
            }
          };

          const handleBack = () => {
            if (currentStep > 0) {
              setCurrentStep(currentStep - 1);
              document.documentElement.scrollTop = 0;
              document.body.scrollTop = 0;
            }
          };

          const handleStepClick = (index) => {
            setCurrentStep(index);
            setShowDiagram(false);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
          };

          const resetWorkshop = () => {
            setCurrentStep(0);
            setSelections({});
            setShowDiagram(false);
            setCustomOptions({});
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
          };

          const handleAddCustomOption = () => {
            setShowCustomForm(true);
          };

          const handleCancelCustomOption = () => {
            setShowCustomForm(false);
            setCustomFormData({
              label: '',
              detail: '',
              timeline: '',
              resources: '',
              risks: ''
            });
          };

          const handleSaveCustomOption = () => {
            const stepId = steps[currentStep].id;
            const customValue = `custom_${Date.now()}`;
            
            const newCustomOption = {
              value: customValue,
              label: customFormData.label,
              detail: customFormData.detail,
              timeline: customFormData.timeline || 'To be determined',
              resources: customFormData.resources || 'To be determined',
              risks: customFormData.risks || 'To be determined',
              kpis: ['Custom metrics to be defined']
            };

            setCustomOptions({
              ...customOptions,
              [stepId]: [...(customOptions[stepId] || []), newCustomOption]
            });

            setShowCustomForm(false);
            setCustomFormData({
              label: '',
              detail: '',
              timeline: '',
              resources: '',
              risks: ''
            });
          };

          const getCurrentStepOptions = () => {
            const stepId = steps[currentStep].id;
            const baseOptions = steps[currentStep].options;
            const customOpts = customOptions[stepId] || [];
            return [...baseOptions, ...customOpts];
          };

          const getSelectedOption = (stepId) => {
            const step = steps.find(s => s.id === stepId);
            const selectedValue = selections[stepId];
            
            const baseOption = step?.options.find(opt => opt.value === selectedValue);
            if (baseOption) return baseOption;
            
            const customOpts = customOptions[stepId] || [];
            return customOpts.find(opt => opt.value === selectedValue);
          };

          const isStepComplete = (stepId) => {
            return selections[stepId] !== undefined;
          };

          const allStepsComplete = () => {
            return steps.every(step => isStepComplete(step.id));
          };

          const phases = [
            { name: 'Foundation', color: '#2563eb', steps: ['scope', 'stakeholders'] },
            { name: 'Planning', color: '#7c3aed', steps: ['assessment', 'goals', 'prioritisation', 'resources'] },
            { name: 'Delivery', color: '#059669', steps: ['implementation', 'monitoring', 'communication'] },
            { name: 'Evolution', color: '#dc2626', steps: ['review'] }
          ];

          if (showDiagram) {
            return (
              <div className="min-h-screen bg-slate-50 p-6">
                <div className="container-md">
                  {/* Playbook Header */}
                  <div className="bg-white border-b-4 border-slate-900 shadow-lg mb-6">
                    <div className="p-8">
                      <div className="flex items-start justify-between">
                        <div>
                          <div className="text-xs font-bold text-slate-500 tracking-wider uppercase mb-2">
                            Operational Playbook
                          </div>
                          <h1 className="text-4xl font-black text-slate-900 mb-1 playbook-header">
                            Sustainability Initiative Process
                          </h1>
                          <p className="text-lg text-slate-600 font-medium">
                            Royal Women's Hospital Melbourne | Process Framework v1.0
                          </p>
                        </div>
                        <button onClick={resetWorkshop} className="btn-primary">
                          <Home size={18} />
                          Reset
                        </button>
                      </div>
                    </div>
                    
                    {/* Phase Overview Bar */}
                    <div className="grid grid-cols-4 border-t border-slate-200">
                      {phases.map((phase, idx) => {
                        const phaseSteps = steps.filter(s => phase.steps.includes(s.id));
                        const completedInPhase = phaseSteps.filter(s => isStepComplete(s.id)).length;
                        
                        return (
                          <div key={phase.name} className="border-r border-slate-200 last:border-r-0 p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <div 
                                className="w-3 h-3 rounded-full"
                                style={{ backgroundColor: phase.color }}
                              />
                              <div className="text-xs font-bold text-slate-600 uppercase tracking-wide">
                                Phase {idx + 1}
                              </div>
                            </div>
                            <div className="font-bold text-slate-900 mb-1">{phase.name}</div>
                            <div className="text-sm text-slate-600">
                              {completedInPhase}/{phaseSteps.length} Steps
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>

                  {/* Executive Summary */}
                  <div className="bg-white border-l-4 border-slate-900 shadow-sm mb-6 p-6">
                    <div className="flex items-start gap-4">
                      <div className="bg-slate-100 rounded-lg p-3">
                        <CheckCircle2 size={24} />
                      </div>
                      <div>
                        <h2 className="font-bold text-slate-900 text-lg mb-2">Process Complete</h2>
                        <p className="text-slate-600 leading-relaxed">
                          Your team has successfully defined a comprehensive sustainability initiative process across 
                          four strategic phases. This playbook outlines the selected approach for each critical decision point, 
                          including implementation timelines, resource requirements, risk factors, and key performance indicators.
                        </p>
                      </div>
                    </div>
                  </div>

                  {/* Process Flow by Phase */}
                  {phases.map((phase, phaseIdx) => {
                    const phaseSteps = steps.filter(s => phase.steps.includes(s.id));
                    
                    return (
                      <div 
                        key={phase.name} 
                        className="mb-8 fade-in-up" 
                        style={{ 
                          animationDelay: `${phaseIdx * 0.1}s`,
                          transform: 'translateY(20px)'
                        }}
                      >
                        {/* Phase Header */}
                        <div className="flex items-center gap-4 mb-4">
                          <div 
                            className="phase-badge"
                            style={{ backgroundColor: phase.color }}
                          >
                            {phaseIdx + 1}
                          </div>
                          <div>
                            <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">
                              Phase {phaseIdx + 1}
                            </div>
                            <h2 className="text-2xl font-black text-slate-900 playbook-header">
                              {phase.name}
                            </h2>
                          </div>
                        </div>

                        {/* Phase Steps */}
                        <div className="space-y-4">
                          {phaseSteps.map((step, stepIdx) => {
                            const selected = getSelectedOption(step.id);
                            const StepIcon = step.icon;
                            
                            return (
                              <div key={step.id} className="relative">
                                {/* Connection Line to Next Step */}
                                {stepIdx < phaseSteps.length - 1 && (
                                  <div className="absolute left-6 top-full h-4 w-0.5 bg-slate-300 connection-line" style={{left: '1.5rem', top: '100%', height: '1rem', width: '0.125rem'}}/>
                                )}
                                
                                <div className="process-node">
                                  {/* Step Header */}
                                  <div 
                                    className="p-5 border-b border-slate-200"
                                    style={{ backgroundColor: `${phase.color}08` }}
                                  >
                                    <div className="flex items-center gap-3 mb-3">
                                      <div 
                                        className="w-10 h-10 rounded-lg flex items-center justify-center text-white"
                                        style={{ backgroundColor: phase.color }}
                                      >
                                        <StepIcon size={20} />
                                      </div>
                                      <div className="flex-1">
                                        <div className="font-bold text-slate-900 text-lg">
                                          {step.title}
                                        </div>
                                        <div className="text-sm text-slate-600">
                                          {step.description}
                                        </div>
                                      </div>
                                    </div>
                                    
                                    {/* Strategic Question */}
                                    <div style={{backgroundColor: 'rgba(255,255,255,0.7)'}} className="rounded-lg p-3 border border-slate-200">
                                      <div className="text-xs font-bold text-slate-500 uppercase tracking-wide mb-1">
                                        Strategic Question
                                      </div>
                                      <div className="text-sm text-slate-700 italic">
                                        {step.strategicQuestion}
                                      </div>
                                    </div>
                                  </div>

                                  {/* Selected Option */}
                                  <div className="p-5">
                                    <div className="flex items-start gap-4">
                                      <div 
                                        className="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 mt-1"
                                        style={{ backgroundColor: `${phase.color}20` }}
                                      >
                                        <Check style={{ color: phase.color }} size={18} />
                                      </div>
                                      <div className="flex-1">
                                        <h3 className="font-bold text-slate-900 text-lg mb-2">
                                          {selected?.label}
                                          {selected?.value.startsWith('custom_') && <span className="custom-badge">Custom</span>}
                                        </h3>
                                        <p className="text-slate-600 mb-4 leading-relaxed">
                                          {selected?.detail}
                                        </p>
                                        
                                        {/* Metrics Grid */}
                                        <div className="grid grid-cols-2 lg:grid-cols-4 gap-3">
                                          <div className="metric-card">
                                            <div className="flex items-center gap-2 mb-1">
                                              <Clock size={14} className="text-slate-500" />
                                              <div className="text-xs font-bold text-slate-500 uppercase">Timeline</div>
                                            </div>
                                            <div className="text-sm font-semibold text-slate-900">
                                              {selected?.timeline}
                                            </div>
                                          </div>
                                          
                                          <div className="metric-card">
                                            <div className="flex items-center gap-2 mb-1">
                                              <DollarSign size={14} className="text-slate-500" />
                                              <div className="text-xs font-bold text-slate-500 uppercase">Resources</div>
                                            </div>
                                            <div className="text-sm font-semibold text-slate-900">
                                              {selected?.resources}
                                            </div>
                                          </div>
                                          
                                          <div className="metric-card">
                                            <div className="flex items-center gap-2 mb-1">
                                              <AlertCircle size={14} className="text-slate-500" />
                                              <div className="text-xs font-bold text-slate-500 uppercase">Key Risks</div>
                                            </div>
                                            <div className="text-sm font-semibold text-slate-900">
                                              {selected?.risks}
                                            </div>
                                          </div>
                                          
                                          <div className="metric-card">
                                            <div className="flex items-center gap-2 mb-1">
                                              <BarChart3 size={14} className="text-slate-500" />
                                              <div className="text-xs font-bold text-slate-500 uppercase">KPIs</div>
                                            </div>
                                            <div className="text-xs text-slate-700 space-y-1" style={{marginTop: '0.125rem'}}>
                                              {selected?.kpis.slice(0, 2).map((kpi, i) => (
                                                <div key={i}>• {kpi}</div>
                                              ))}
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            );
                          })}
                        </div>

                        {/* Phase Connection */}
                        {phaseIdx < phases.length - 1 && (
                          <div className="flex items-center justify-center my-6" style={{margin: '1.5rem 0'}}>
                            <div className="flex items-center gap-3">
                              <div className="h-0.5 w-24 bg-gradient-to-r from-slate-300 to-slate-400" />
                              <div className="bg-slate-100 rounded-full px-4 py-2 text-xs font-bold text-slate-600 uppercase tracking-wide">
                                Transition to {phases[phaseIdx + 1].name}
                              </div>
                              <div className="h-0.5 w-24 bg-gradient-to-r from-slate-400 to-slate-300" />
                            </div>
                          </div>
                        )}
                      </div>
                    );
                  })}

                  {/* Implementation Roadmap */}
                  <div className="card mt-8">
                    <div className="p-6">
                      <div className="flex items-center gap-3 mb-6">
                        <div className="icon-badge bg-slate-900">
                          <ArrowRight style={{color: 'white'}} size={24} />
                        </div>
                        <div>
                          <h2 className="text-2xl font-black text-slate-900 playbook-header">
                            Next Steps: Implementation Roadmap
                          </h2>
                          <p className="text-slate-600">
                            Critical actions to operationalise your sustainability initiative
                          </p>
                        </div>
                      </div>
                      
                      <div className="grid md:grid-cols-2 gap-4">
                        <div className="bg-slate-50 rounded-lg p-5 border border-slate-200">
                          <div className="font-bold text-slate-900 mb-3 flex items-center gap-2">
                            <div className="w-6 h-6 rounded bg-slate-900 text-white flex items-center justify-center text-sm font-bold">1</div>
                            Immediate Actions (Week 1-2)
                          </div>
                          <ul className="space-y-2 text-sm text-slate-700">
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-green-600 mt-1 flex-shrink-0" />
                              Document this playbook and circulate to all stakeholders
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-green-600 mt-1 flex-shrink-0" />
                              Assign executive sponsor and project leadership
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-green-600 mt-1 flex-shrink-0" />
                              Schedule steering committee formation meeting
                            </li>
                          </ul>
                        </div>
                        
                        <div className="bg-slate-50 rounded-lg p-5 border border-slate-200">
                          <div className="font-bold text-slate-900 mb-3 flex items-center gap-2">
                            <div className="w-6 h-6 rounded bg-slate-900 text-white flex items-center justify-center text-sm font-bold">2</div>
                            Short-term Setup (Month 1-3)
                          </div>
                          <ul className="space-y-2 text-sm text-slate-700">
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-blue-600 mt-1 flex-shrink-0" />
                              Develop detailed project plans for each phase
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-blue-600 mt-1 flex-shrink-0" />
                              Secure funding commitments and resource allocation
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-blue-600 mt-1 flex-shrink-0" />
                              Establish baseline measurement systems
                            </li>
                          </ul>
                        </div>
                        
                        <div className="bg-slate-50 rounded-lg p-5 border border-slate-200">
                          <div className="font-bold text-slate-900 mb-3 flex items-center gap-2">
                            <div className="w-6 h-6 rounded bg-slate-900 text-white flex items-center justify-center text-sm font-bold">3</div>
                            Medium-term Execution (Quarter 1-2)
                          </div>
                          <ul className="space-y-2 text-sm text-slate-700">
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-purple-600 mt-1 flex-shrink-0" />
                              Launch pilot programmes and initial initiatives
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-purple-600 mt-1 flex-shrink-0" />
                              Implement monitoring and reporting systems
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-purple-600 mt-1 flex-shrink-0" />
                              Begin stakeholder engagement and communication campaigns
                            </li>
                          </ul>
                        </div>
                        
                        <div className="bg-slate-50 rounded-lg p-5 border border-slate-200">
                          <div className="font-bold text-slate-900 mb-3 flex items-center gap-2">
                            <div className="w-6 h-6 rounded bg-slate-900 text-white flex items-center justify-center text-sm font-bold">4</div>
                            Long-term Sustainability (Year 1+)
                          </div>
                          <ul className="space-y-2 text-sm text-slate-700">
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-red-600 mt-1 flex-shrink-0" />
                              Scale successful pilots across the organisation
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-red-600 mt-1 flex-shrink-0" />
                              Conduct regular performance reviews and course corrections
                            </li>
                            <li className="flex items-start gap-2">
                              <Check size={16} className="text-red-600 mt-1 flex-shrink-0" />
                              Embed sustainability into organisational culture and operations
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* Success Factors */}
                  <div className="bg-gradient-to-br from-slate-900 to-slate-700 rounded-xl shadow-lg p-8 mt-6 text-white">
                    <h2 className="text-2xl font-black mb-6 playbook-header">Critical Success Factors</h2>
                    <div className="grid md:grid-cols-3 gap-6">
                      <div>
                        <div className="font-bold mb-2 flex items-center gap-2">
                          <Target size={20} />
                          Leadership Commitment
                        </div>
                        <p style={{color: 'rgba(255,255,255,0.8)'}} className="text-sm">
                          Sustained executive support and visible championship from board and senior management
                        </p>
                      </div>
                      <div>
                        <div className="font-bold mb-2 flex items-center gap-2">
                          <Users size={20} />
                          Cultural Integration
                        </div>
                        <p style={{color: 'rgba(255,255,255,0.8)'}} className="text-sm">
                          Embedding sustainability into daily operations and decision-making across all levels
                        </p>
                      </div>
                      <div>
                        <div className="font-bold mb-2 flex items-center gap-2">
                          <TrendingUp size={20} />
                          Data-Driven Decisions
                        </div>
                        <p style={{color: 'rgba(255,255,255,0.8)'}} className="text-sm">
                          Rigorous measurement, transparent reporting, and evidence-based continuous improvement
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Footer */}
                <div className="footer">
                  <div className="footer-content">
                    2026 · Shrunk Innovation Group · All Rights Reserved
                  </div>
                </div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-slate-50 p-6">
              <div className="container-md">
                {/* Header */}
                <div className="bg-white border-b-4 border-slate-900 shadow-lg mb-6">
                  <div className="p-8">
                    <div className="text-xs font-bold text-slate-500 tracking-wider uppercase mb-2">
                      Operational Playbook Workshop
                    </div>
                    <h1 className="text-5xl font-black text-slate-900 mb-2 playbook-header">
                      Sustainability Initiative Process Design
                    </h1>
                    <p className="text-xl text-slate-600 font-medium">
                      Royal Women's Hospital Melbourne | Strategic Planning Session
                    </p>
                  </div>
                  
                  {/* Progress Indicators */}
                  <div className="border-t border-slate-200 p-6">
                    <div className="flex items-center gap-2 flex-wrap mb-4" style={{flexWrap: 'wrap'}}>
                      {steps.map((step, index) => {
                        const StepIcon = step.icon;
                        return (
                          <React.Fragment key={step.id}>
                            <div
                              onClick={() => handleStepClick(index)}
                              className={`step-indicator
                                ${isStepComplete(step.id) ? 'complete' : 'inactive'}
                                ${currentStep === index ? 'active' : ''}
                              `}
                              title={step.title}
                            >
                              {isStepComplete(step.id) ? (
                                <Check size={20} />
                              ) : (
                                <StepIcon size={20} />
                              )}
                            </div>
                            {index < steps.length - 1 && (
                              <div className="progress-bar">
                                <div 
                                  className="progress-fill"
                                  style={{width: isStepComplete(steps[index + 1].id) ? '100%' : '0%'}}
                                />
                              </div>
                            )}
                          </React.Fragment>
                        );
                      })}
                    </div>
                    
                    <div className="flex items-center justify-between text-sm">
                      <div className="text-slate-600">
                        <span className="font-bold text-slate-900">{steps[currentStep].phase}</span> Phase • 
                        Step {currentStep + 1} of {steps.length}
                      </div>
                      <div className="text-slate-600">
                        {Object.keys(selections).length} / {steps.length} completed
                      </div>
                    </div>
                  </div>
                </div>

                {/* Current Step */}
                <div className="slide-in">
                  <div className="card mb-6">
                    {/* Step Header */}
                    <div className="card-header">
                      <div className="flex items-start gap-4 mb-6">
                        <div className="bg-slate-900 w-14 h-14 rounded-xl flex items-center justify-center text-white shadow-lg">
                          {React.createElement(steps[currentStep].icon, { size: 28 })}
                        </div>
                        <div className="flex-1">
                          <div className="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">
                            {steps[currentStep].phase} Phase • Step {currentStep + 1}
                          </div>
                          <h2 className="text-4xl font-black text-slate-900 mb-2 playbook-header">
                            {steps[currentStep].title}
                          </h2>
                          <p className="text-lg text-slate-600 leading-relaxed">
                            {steps[currentStep].description}
                          </p>
                        </div>
                      </div>

                      {/* Strategic Question */}
                      <div className="bg-white border-l-4 border-slate-900 p-5 rounded-r-lg">
                        <div className="text-xs font-bold text-slate-500 uppercase tracking-wide mb-2">
                          Strategic Question
                        </div>
                        <p className="text-slate-900 font-medium italic text-lg">
                          {steps[currentStep].strategicQuestion}
                        </p>
                      </div>
                    </div>

                    {/* Options */}
                    <div className="p-8">
                      <div className="text-sm font-bold text-slate-500 uppercase tracking-wide mb-4">
                        Select Your Approach
                      </div>
                      <div className="space-y-4">
                        {getCurrentStepOptions().map((option) => {
                          const isSelected = selections[steps[currentStep].id] === option.value;
                          const isCustom = option.value.startsWith('custom_');
                          
                          return (
                            <div
                              key={option.value}
                              onClick={() => handleOptionSelect(option.value)}
                              className={`option-card ${isSelected ? 'selected' : ''}`}
                            >
                              <div className="flex items-start gap-4">
                                <div className="option-checkbox">
                                  {isSelected && (
                                    <Check size={16} style={{color: '#0f172a'}} />
                                  )}
                                </div>
                                <div className="flex-1">
                                  <h3 className="option-title">
                                    {option.label}
                                    {isCustom && <span className="custom-badge">Custom</span>}
                                  </h3>
                                  <p className="option-detail">
                                    {option.detail}
                                  </p>
                                  
                                  {/* Operational Details */}
                                  <div className="option-meta">
                                    <div>
                                      <div className="text-xs font-bold uppercase tracking-wide mb-1 flex items-center gap-1">
                                        <Clock size={12} />
                                        Timeline
                                      </div>
                                      <div className="text-sm font-semibold">{option.timeline}</div>
                                    </div>
                                    <div>
                                      <div className="text-xs font-bold uppercase tracking-wide mb-1 flex items-center gap-1">
                                        <DollarSign size={12} />
                                        Resources
                                      </div>
                                      <div className="text-sm font-semibold">{option.resources}</div>
                                    </div>
                                    <div className="col-span-2">
                                      <div className="text-xs font-bold uppercase tracking-wide mb-1 flex items-center gap-1">
                                        <AlertCircle size={12} />
                                        Key Risks
                                      </div>
                                      <div className="text-sm">{option.risks}</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          );
                        })}

                        {/* Add Custom Option Button/Form */}
                        {!showCustomForm ? (
                          <button 
                            onClick={handleAddCustomOption}
                            className="btn-add-custom w-full"
                          >
                            <Plus size={20} />
                            Add Custom Alternative Approach
                          </button>
                        ) : (
                          <div className="custom-form">
                            <div className="flex items-center justify-between mb-4">
                              <h4 className="font-bold text-slate-900">Add Custom Alternative</h4>
                              <button 
                                onClick={handleCancelCustomOption}
                                className="text-slate-500 hover:text-slate-900"
                              >
                                <X size={20} />
                              </button>
                            </div>

                            <div className="form-group">
                              <label className="form-label">
                                Approach Name <span style={{color: '#dc2626'}}>*</span>
                              </label>
                              <input
                                type="text"
                                className="form-input"
                                placeholder="e.g., Hybrid Approach"
                                value={customFormData.label}
                                onChange={(e) => setCustomFormData({...customFormData, label: e.target.value})}
                                required
                              />
                            </div>

                            <div className="form-group">
                              <label className="form-label">
                                Description <span style={{color: '#dc2626'}}>*</span>
                              </label>
                              <textarea
                                className="form-textarea"
                                placeholder="Describe your alternative approach..."
                                value={customFormData.detail}
                                onChange={(e) => setCustomFormData({...customFormData, detail: e.target.value})}
                                required
                              />
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                              <div className="form-group">
                                <label className="form-label">Timeline (Optional)</label>
                                <input
                                  type="text"
                                  className="form-input"
                                  placeholder="e.g., 12-18 months"
                                  value={customFormData.timeline}
                                  onChange={(e) => setCustomFormData({...customFormData, timeline: e.target.value})}
                                />
                              </div>

                              <div className="form-group">
                                <label className="form-label">Resources (Optional)</label>
                                <input
                                  type="text"
                                  className="form-input"
                                  placeholder="e.g., Medium capital"
                                  value={customFormData.resources}
                                  onChange={(e) => setCustomFormData({...customFormData, resources: e.target.value})}
                                />
                              </div>
                            </div>

                            <div className="form-group">
                              <label className="form-label">Key Risks (Optional)</label>
                              <input
                                type="text"
                                className="form-input"
                                placeholder="e.g., Implementation complexity"
                                value={customFormData.risks}
                                onChange={(e) => setCustomFormData({...customFormData, risks: e.target.value})}
                              />
                            </div>

                            <div className="form-actions">
                              <button 
                                onClick={handleCancelCustomOption}
                                className="btn-cancel btn-small"
                              >
                                Cancel
                              </button>
                              <button 
                                onClick={handleSaveCustomOption}
                                className="btn-primary btn-small"
                                disabled={!customFormData.label || !customFormData.detail}
                              >
                                <Check size={16} />
                                Add Alternative
                              </button>
                            </div>
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                </div>

                {/* ✅ Navigation (unchanged, only added navigation-buttons class for mobile stacking) */}
                <div className="flex items-center justify-between gap-4 navigation-buttons">
                  <button
                    onClick={handleBack}
                    disabled={currentStep === 0}
                    className="btn-secondary"
                  >
                    <ChevronLeft size={20} />
                    Previous
                  </button>

                  <div className="text-center">
                    {!selections[steps[currentStep].id] && (
                      <div className="alert">
                        <p className="text-sm text-amber-900 font-medium">
                          Select an option to proceed
                        </p>
                      </div>
                    )}
                  </div>

                  <button
                    onClick={handleNext}
                    disabled={!selections[steps[currentStep].id]}
                    className="btn-primary"
                  >
                    {currentStep === steps.length - 1 ? 'Generate Playbook' : 'Next Step'}
                    <ChevronRight size={20} />
                  </button>
                </div>

                {allStepsComplete() && currentStep === steps.length - 1 && (
                  <div className="success-banner mt-6">
                    <div className="flex items-center gap-4">
                      <div style={{backgroundColor: 'rgba(255,255,255,0.2)'}} className="rounded-full p-3">
                        <CheckCircle2 size={32} />
                      </div>
                      <div>
                        <h3 className="font-bold text-xl mb-1">Process Design Complete</h3>
                        <p style={{color: 'rgba(255,255,255,0.9)'}}>
                          All steps have been defined. Click "Generate Playbook" to view your comprehensive operational framework.
                        </p>
                      </div>
                    </div>
                  </div>
                )}
              </div>

              {/* Footer */}
              <div className="footer">
                <div className="footer-content">
                  2026 · Shrunk Innovation Group · All Rights Reserved
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<SustainabilityWorkshop />, document.getElementById('root'));
    </script>
</body>
</html>
